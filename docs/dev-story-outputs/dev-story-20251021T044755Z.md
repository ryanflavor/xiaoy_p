# dev-story · 执行检查点（可观测与指标）

执行时间 (UTC)：$(date -u +%Y-%m-%dT%H:%M:%SZ)

## 变更摘要
- 新增 `apps/ui/src/lib/metrics/metrics.mjs`：Counter/Gauge/LatencyTracker、FPS meter、MetricsRegistry；命名对齐（ui_fps、ui_e2e_latency_ms、ui_slow_consumers）。
- 新增单测 `apps/ui/test/metrics.test.mjs`：3 项全部通过。
- 现有 apps/ui 测试合计 11/11 通过。

## 使用建议
- 在页面层：创建 FPS meter 上报 `ui_fps`；在解码链路处记录端到端延迟到 `ui_e2e_latency_ms`；检测到背压/丢弃批次时递增 `ui_slow_consumers`。
- 在 SharedWorker：已支持 `health` 与慢消费者记录消息，可扩展注入 MetricsRegistry 进行周期性快照上报。

